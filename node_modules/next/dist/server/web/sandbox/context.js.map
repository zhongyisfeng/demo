{"version":3,"sources":["../../../../src/server/web/sandbox/context.ts"],"names":["clearModuleContext","getModuleContext","moduleContexts","Map","pendingModuleCaches","path","handleContext","key","cache","context","paths","has","delete","loadWasm","wasm","modules","Promise","all","map","binding","module","WebAssembly","compile","fs","readFile","filePath","name","buildEnvironmentVariablesFrom","pairs","Object","keys","process","env","fromEntries","NEXT_RUNTIME","throwUnsupportedAPIError","error","Error","decorateServerError","COMPILER_NAMES","edgeServer","createProcessPolyfill","processPolyfill","overridenValue","defineProperty","get","undefined","set","value","enumerable","addStub","getDecorateUnhandledError","runtime","EdgeRuntimeError","evaluate","getDecorateUnhandledRejection","rejected","reason","NativeModuleMap","mods","pick","BufferImplementation","EventsImplementation","AsyncHooksImplementation","AssertImplementation","UtilImplementation","entries","createModuleContext","options","warnedEvals","Set","warnedWasmCodegens","edgeFunctionEntry","EdgeRuntime","codeGeneration","NODE_ENV","strings","extend","id","TypeError","__next_eval__","fn","toString","warning","getServerError","captureStackTrace","add","onWarning","__next_webassembly_compile__","__next_webassembly_instantiate__","result","instantiatedFromBuffer","hasOwnProperty","__fetch","fetch","input","init","callingError","assetResponse","fetchInlineAsset","assets","distDir","headers","Headers","response","url","String","catch","err","message","stack","__Request","Request","constructor","validateURL","next","__redirect","Response","redirect","bind","args","EDGE_UNSUPPORTED_NODE_APIS","assign","AsyncLocalStorage","decorateUnhandledError","addEventListener","decorateUnhandledRejection","getModuleContextShared","deferredModuleContext","moduleName","lazyModuleContext","useCache","moduleContext","evaluateInContext","filepath","content","readFileSync","runInContext","filename"],"mappings":"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"}